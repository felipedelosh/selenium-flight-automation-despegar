!function(){"use strict";var e={159:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DespegarCookies=void 0,(n=t.DespegarCookies||(t.DespegarCookies={})).REDEMPTION_SWITCH="redemption_switch",n.DSS="dss",n.WL_SESSION="wl_session",n.LOYALTY_COARCHMARK="s_loyalty_coachmark"},421:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchEvents=void 0,(t.SwitchEvents||(t.SwitchEvents={})).LOYALTY_MODE_CHANGED="loyaltyModeChanged"},286:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchTrackingAction=void 0,(n=t.SwitchTrackingAction||(t.SwitchTrackingAction={})).PAGEVIEW="pageview",n.MODE_TOGGLE="mode-toggle",n.LANDING_LINK_CLICK="landing-link-click"},526:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LoyaltyMode=void 0,(n=t.LoyaltyMode||(t.LoyaltyMode={})).ACQUISITION="acquisition",n.ACCUMULATION="accumulation",n.REDEMPTION="redemption",n.COUNTRY_OFF="country_off"},140:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LoyaltySwitchDisplay=void 0,(n=t.LoyaltySwitchDisplay||(t.LoyaltySwitchDisplay={})).INVISIBLE="invisible",n.VISIBLE_ENABLED="visible_enabled",n.VISIBLE_DISABLED="visible_disabled"},604:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.deleteRedemptionCookie=t.createRedemptionCookie=t.getCookie=void 0;var o=n(159),i=n(526);t.getCookie=function(e){var t,n="; ".concat(document.cookie).split("; ".concat(e,"="));return 2===n.length?null===(t=n.pop())||void 0===t?void 0:t.split(";").shift():void 0},t.createRedemptionCookie=function(){document.cookie="".concat(o.DespegarCookies.REDEMPTION_SWITCH,"=").concat(i.LoyaltyMode.REDEMPTION,"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/")},t.deleteRedemptionCookie=function(){document.cookie="".concat(o.DespegarCookies.REDEMPTION_SWITCH,"=").concat(i.LoyaltyMode.REDEMPTION,"; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/")}},755:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.setOnClickSwitchHandlerForAcquisition=t.setOnClickSwitchHandler=void 0;var o=n(421),i=n(286),a=n(526),c=n(604),r=n(513);t.setOnClickSwitchHandlerForAcquisition=function(e,t,n,o,c){e.addEventListener("click",(function(e){var s=location.href;(0,r.upaTrack)(n,o,a.LoyaltyMode.ACQUISITION,c,i.SwitchTrackingAction.LANDING_LINK_CLICK).then((function(){return location.href="".concat(t,"?redirect_to=").concat(encodeURIComponent(s))})).catch((function(){console.error("Track landing-link-click failed"),location.href="".concat(t,"?redirect_to=").concat(encodeURIComponent(s))}))}))},t.setOnClickSwitchHandler=function(e,t,n,s){e.addEventListener("click",(function(e){var l=e.target,d=l.checked?a.LoyaltyMode.REDEMPTION:a.LoyaltyMode.ACCUMULATION;d===a.LoyaltyMode.REDEMPTION?(0,c.createRedemptionCookie)():(0,c.deleteRedemptionCookie)(),(0,r.upaTrack)(t,n,d,s,i.SwitchTrackingAction.MODE_TOGGLE),function(e,t){var n=new CustomEvent(o.SwitchEvents.LOYALTY_MODE_CHANGED,{detail:{mode:t}});e.dispatchEvent(n)}(l,d)}))}},198:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.invalidInitializationParameters=void 0;var n=function(e){return"string"==typeof e};t.invalidInitializationParameters=function(e,t,o,i){return!(function(e){return n(e)&&function(e){return 2===e.split("-").length}(e.replace("_","-"))}(e)&&(a=t,a&&n(a.fl)&&n(a.pr)&&n(a.pageview_id)&&n(a.flow_type))&&function(e){return"boolean"==typeof e}(o)&&(!i||n(i)));var a}},513:function(e,t,n){var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.upaTrack=t.getLoyaltyData=t.buildQueryParams=void 0;var i=n(777),a=n(777);t.upaTrack=function(e,n,i,c,r){var s=(0,t.buildQueryParams)({locale:e});return new Promise((function(e,t){var l=new XMLHttpRequest;l.onload=function(){200===l.status?e():t()},l.open("POST",(0,a.getUPATrackServiceURL)(s),!0),l.setRequestHeader("Content-Type","application/json;charset=UTF-8"),l.setRequestHeader("tracking_action",r),l.setRequestHeader("pageview_id",n),l.setRequestHeader("switch_version","3.0.0"),l.send(JSON.stringify(o(o({},c),{loyalty_mode:i})))}))},t.buildQueryParams=function(e){return Object.keys(e).sort().filter((function(t){return!!e[t]})).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")},t.getLoyaltyData=function(e,n,o,a,c){var r=(0,t.buildQueryParams)({locale:e,pr:n.pr,fl:n.fl,flow_type:n.flow_type});return c&&(r+="&placeholder=".concat(c)),new Promise((function(e,t){var c=new XMLHttpRequest;c.onload=function(){200===c.status&&null!==c.response?e(JSON.parse(c.response)):t({message:"Server response with status",status:c.status})},c.onerror=function(){t({message:"Network Error",status:c.status})},c.ontimeout=function(){t({message:"Timeout",status:c.status})},c.open("GET",(0,i.getLoyaltyServiceURL)(r),!0),c.timeout=5e3,c.setRequestHeader("Content-Type","application/json;charset=UTF-8"),c.setRequestHeader("switch_version","3.0.0"),n.pageview_id&&c.setRequestHeader("pageview_id",n.pageview_id),o&&c.setRequestHeader("tracking_action",o),a&&c.setRequestHeader("x-skip-track","true"),c.send()}))}},420:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.switchToCorrectRenderFunction=void 0;var o=n(140),i=n(604),a=n(755),c=n(526),r=function(e,t,n){return void 0===n&&(n=!0),e.use_new_design?function(e,t,n){void 0===n&&(n=!0);var o=t?"-collapsed":"";return'\n        <div \n            data-version="'.concat("3.0.0",'" \n            class="eva-3-redemption-switch -loyalty ').concat(o,'" \n            style="display: flex; align-items: center; padding: 8px 24px; border: solid 1px var(--color-neutral-300); border-radius: 8px;" \n            id="redemption-switch-component"\n        >\n            <i class="-eva-3-icon-xsm eva-3-icon-loyalty-filled -eva-3-tc-bubblegum-1"></i>\n            <div class="-eva-3-bold eva-3-h6" style="margin: 0 auto 0 8px;">').concat(e.title,'</div>\n            <div class="eva-3-caption">').concat(e.subtitle,'</div>\n            <div class="redemption-switch" style="margin-left: 8px;">\n                <span class="eva-3-switch -loyalty">\n                    <label class="switch-label">\n                        <input type="checkbox" class="switch-input" id="switch-input" ').concat(n?"":"disabled",'>\n                        <span class="switch-container">\n                            <span class="switch-circle"></span>\n                        </span>\n                    </label>\n                </span>\n            </div>\n        </div>\n        ')}(e,t,n):function(e,t,n){void 0===n&&(n=!0);var o=t?"-collapsed":"";return'\n        <div data-version="'.concat("3.0.0",'" class="eva-3-redemption-switch -loyalty ').concat(o,'" id="redemption-switch-component">\n            <img src=').concat("https://www.staticontent.com/eva-core/assets/logos/0.0.1/loyalty-logo.svg",' class="redemption-logo">\n            <div class="redemption-content">\n                <div class="redemption-title -eva-3-bold">\n                    ').concat(e.title,'\n                </div>\n                <div class="redemption-subtitle">\n                    ').concat(e.subtitle,'\n                </div>\n            </div>\n            <div class="redemption-switch">\n                <span class="eva-3-switch -loyalty ').concat(t?"":"-md",'">\n                    <label class="switch-label">\n                        <input type="checkbox" class="switch-input" id="switch-input" ').concat(n?"":"disabled",'>\n                        <span class="switch-container">\n                            <span class="switch-circle"></span>\n                        </span>\n                    </label>\n                </span>\n            </div>\n        </div>\n        ')}(e,t,n)},s=function(e,t){return r(e,t,!1)},l=function(e,t){return r(e,t)},d=function(e,t){return r(e,t)},u=function(e,t){return function(e,t){var n=t?"-collapsed":"";return'\n        <div data-version="'.concat("3.0.0",'" class="eva-3-redemption-switch -loyalty ').concat(n,' -card" id="redemption-switch-component" style="cursor: pointer;">\n            <img src=').concat("https://www.staticontent.com/eva-core/assets/logos/0.0.1/loyalty-logo.svg",' class="redemption-logo">\n            <div class="redemption-content">\n                <div class="redemption-title -eva-3-bold -eva-3-tc-bubblegum-text-1">\n                    ').concat(e.title,'\n                </div>\n                <div class="redemption-subtitle -eva-3-bold -eva-3-tc-bubblegum-text-1">\n                    ').concat(e.subtitle,'\n                    <i class="eva-3-icon-arrow-right"></i>\n                </div>\n            </div>\n        </div>\n        ')}(e,t)},y=function(e,t,n,o){var i=document.getElementById(t);i?i.innerHTML=e(n,o):console.error("The element with id=".concat(t," was not found"))},p=function(e,t,n,i,r,p){switch(e){case c.LoyaltyMode.ACQUISITION:y(u,n,t,i),function(e,t,n,o){var i=document.getElementById("redemption-switch-component");i&&(0,a.setOnClickSwitchHandlerForAcquisition)(i,e,t,n,o)}(t.signin_link,r,p,t.tracking);break;case c.LoyaltyMode.ACCUMULATION:t.display===o.LoyaltySwitchDisplay.VISIBLE_DISABLED?y(s,n,t,i):(y(l,n,t,i),function(e,t,n){var o=document.getElementById("switch-input");o&&(0,a.setOnClickSwitchHandler)(o,e,t,n)}(r,p,t.tracking));break;case c.LoyaltyMode.REDEMPTION:y(d,n,t,i),function(e,t,n){var o=document.getElementById("switch-input");o&&((0,a.setOnClickSwitchHandler)(o,e,t,n),o.checked=!0)}(r,p,t.tracking);break;default:console.error("The name of the switch status (".concat(e,") is invalid"))}};t.switchToCorrectRenderFunction=function(e,t,n,a,c,r){if(t.display===o.LoyaltySwitchDisplay.INVISIBLE)t.is_whitelabel&&(0,i.createRedemptionCookie)();else if(!t.is_whitelabel)if(t.use_client_placeholder&&r)p(e,t,r,c,n,a);else{var s=window.shifuLoyaltySwitchPlaceholder;s?(p(e,t,s,c,n,a),window.showLoyaltyPointsIncentive&&window.showLoyaltyPointsIncentive()):window.addEventListener("shifuLoyaltyMenuLoaded",(function(o){p(e,t,o.detail.loyaltySwitchPlaceholder,c,n,a),window.showLoyaltyPointsIncentive&&window.showLoyaltyPointsIncentive()}),!1)}}},777:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getLoyaltyServiceURL=t.getUPATrackServiceURL=void 0,t.getLoyaltyServiceURL=function(e){return"".concat("/commons-vr/loyalty","?").concat(e)},t.getUPATrackServiceURL=function(e){return"".concat("/commons-vr/loyalty","/track?").concat(e)}},461:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function c(e){try{s(o.next(e))}catch(e){a(e)}}function r(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}s((o=o.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,o,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,r[0]&&(c=0)),c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(159),c=n(286),r=n(604),s=n(198),l=n(513),d=n(420),u=n(526);window.loyaltyRedemptionSwitch=function(e,t,n,y){if((0,s.invalidInitializationParameters)(e,t,n,y))throw new Error("Missing or invalid initialization parameters");var p,v=function(s){return o(void 0,void 0,void 0,(function(){return i(this,(function(o){switch(o.label){case 0:return[4,(0,l.getLoyaltyData)(e,t,c.SwitchTrackingAction.PAGEVIEW,s,y)];case 1:return(p=o.sent()).mode!==u.LoyaltyMode.REDEMPTION&&(0,r.getCookie)(a.DespegarCookies.REDEMPTION_SWITCH)&&(0,r.deleteRedemptionCookie)(),p.mode!==u.LoyaltyMode.COUNTRY_OFF&&(0,d.switchToCorrectRenderFunction)(p.mode,p.loyalty_switch,e,t.pageview_id,n,y),[2,p]}}))}))},f=function(){if(!p)return console.error("Redemption-Switch not initialized"),u.LoyaltyMode.COUNTRY_OFF;switch(p.mode){case u.LoyaltyMode.COUNTRY_OFF:return u.LoyaltyMode.COUNTRY_OFF;case u.LoyaltyMode.ACQUISITION:return u.LoyaltyMode.ACQUISITION;case u.LoyaltyMode.REDEMPTION:case u.LoyaltyMode.ACCUMULATION:return void 0!==(0,r.getCookie)(a.DespegarCookies.REDEMPTION_SWITCH)?u.LoyaltyMode.REDEMPTION:u.LoyaltyMode.ACCUMULATION}};return{getLoyaltyMode:f,initializeSwitch:function(){return o(void 0,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,10]),[4,v(!1)];case 1:return[2,t.sent()];case 2:e=t.sent(),t.label=3;case 3:return t.trys.push([3,8,,9]),408!==e.status&&0!==e.status?[3,5]:[4,v(!0)];case 4:return[2,t.sent()];case 5:return[4,v(!1)];case 6:return[2,t.sent()];case 7:return[3,9];case 8:return t.sent(),console.error("Redemption-Switch failed fetching the response."),[2,{mode:u.LoyaltyMode.COUNTRY_OFF}];case 9:return[3,10];case 10:return[2]}}))}))},updatePageViewId:function(n){var o;(null===(o=p.loyalty_switch)||void 0===o?void 0:o.tracking)?(t.pageview_id=n,(0,l.upaTrack)(e,n,f(),p.loyalty_switch.tracking,c.SwitchTrackingAction.PAGEVIEW)):console.error("Redemption-Switch not initialized")}}}}},t={};!function n(o){var i=t[o];if(void 0!==i)return i.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}(461)}();